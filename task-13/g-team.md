
# Задача о рюкзаке (Knapsack problem). Генетический алгоритм.

### Вариант 4: 
Решить задачу о рюкзаке с применением генетического алгоритма, с учетом следующих требований:
   - Придумать условия задачи с количеством предметов не менее 6.
   - Численность популяции не менее 4 особей, в скрещивании участвует половина популяции. 
   - Для скрещивания выбираются особи по принципу рулетки, скрещивание – равномерное.
   - До выполнения алгоритма сформулировать стратегию применения оператора мутации.
   - Сформировать не менее 3 поколений, не считая первоначального.


## Условия задачи

Дано 6 предметов, их стоимости и веса:

| Предметы  |  1  | 2 |  3  | 4 | 5 | 6 |
|:----------|:---:|:-:|:---:|:-:|:-:|:-:|
| Вес       |  2  | 3 |  5  | 7 | 4 | 1 |
| Стоимость | 10  | 15|  25 | 30| 20| 5 |

Вместимость рюкзака равна 15.

Мутация применяется в случае, если набор особей поколения не менялся два поколения подряд, а также если новая особь (потомок) идентична особям, полученным ранее.
Если вес особи превышает вместимость рюкзака, тогда она считается нежизнеспособной и исключается из поколения.

## Решение

Обозначим единицей (1) предметы, которые кладем в рюкзак, а нулем (0) те, которые не берем с собой.

### Поколение 1

Возьмём 4 случайных наборов строк (особей):

1. X1 (101100)
2. X2 (111011)
3. X3 (001100)
4. X4 (101010)

#### Посчитаем фитнес-функции полученных особей

1. f(x1) = 65
2. f(x2) = 75
3. f(x3) = 55
4. f(x4) = 55

#### Отбор родительских особей принципом рулетки
Для нового поколения отберем родителей принципом рулетки. Для этого обозначим в процентах долю фитнес-функции каждой особи от суммы всех фитнес-функций (от всего поколения). Каждая особь имеет шанс стать родительской пропорциональный величине фитнес-функции.

1. f(x1) = 65 -> 26%
2. f(x2) = 75 -> 30%
3. f(x3) = 55 -> 22%
4. f(x4) = 55 -> 22%

После прокрутки стрелки - методом рулетки - родительскими особями становятся x2 и x4.

#### Скрещивание
Используем тип скрещивания равномерный. Для каждого гена в случайном порядке поставим плюсы и минусы. + означает прямое наследование, то есть ген первого родителя передаётся первому потомку, а второго - второму; - означает тот же процесс, но уже с инвертированием.

- Ген(-+-+++)
- X2 (111011)
- X4 (101010)
- X5 (010011)
- X6 (000010)

Фитнес-функции потомков:
- f(x5) = 40 
- f(x6) = 20 


### Поколение 2
Отбираем 4 наиболее приспособленные особи из всех поколений. Так как полученные при скрещивании потомки не превышают по приспособленности предыдущих особей, то второе поколение становится идентичным первому:

1. X1 (101100)
2. X2 (111011)
3. X3 (001100)
4. X4 (101010)

#### Посчитаем фитнес-функции полученных особей

1. f(x1) = 65
2. f(x2) = 75
3. f(x3) = 55
4. f(x4) = 55

#### Отбор родительских особей принципом рулетки
Для нового поколения отберем родителей принципом рулетки. Для этого обозначим в процентах долю фитнес-функции каждой особи от суммы всех фитнес-функций (от всего поколения). Каждая особь имеет шанс стать родительской пропорциональный величине фитнес-функции.

1. f(x1) = 65 -> 26%
2. f(x2) = 75 -> 30%
3. f(x3) = 55 -> 22%
4. f(x4) = 55 -> 22%

После прокрутки стрелки - методом рулетки - родительскими особями становятся x1 и x2.

#### Скрещивание
Используем тип скрещивания равномерный. Для каждого гена в случайном порядке поставим плюсы и минусы. + означает прямое наследование, то есть ген первого родителя передаётся первому потомку, а второго - второму; - означает тот же процесс, но уже с инвертированием.

- Ген(+--+++)
- X1 (101100)
- X2 (111011)
- X7 (110100)
- X8 (100011)

Фитнес-функции потомков:
- f(x7) = 55
- f(x8) = 35 

### Поколение 3
Поскольку два предыдущих поколения не меняли набор особей, применим к одной из них метод мутации: инвертируем случайных ген особи. Возьмем особь Х3:
- X3 (001100) ---> Х3 (011100)
- мутировали второй ген

Теперь отберем наиболее приспособленных особей и получим поколение:
1. X1 (101100)
2. X2 (111011)
3. X3 (011100)
4. X4 (101010)


#### Посчитаем фитнес-функции полученных особей

1. f(x1) = 65
2. f(x2) = 75
3. f(x3) = 70
4. f(x4) = 55

#### Отбор родительских особей принципом рулетки
Для нового поколения отберем родителей принципом рулетки. Для этого обозначим в процентах долю фитнес-функции каждой особи от суммы всех фитнес-функций (от всего поколения). Каждая особь имеет шанс стать родительской пропорциональный величине фитнес-функции.

1. f(x1) = 65 -> 24%
2. f(x2) = 75 -> 28%
3. f(x3) = 55 -> 26%
4. f(x4) = 55 -> 22%

После прокрутки стрелки - методом рулетки - родительскими особями становятся x1 и x3.

#### Скрещивание
Используем тип скрещивания равномерный. Для каждого гена в случайном порядке поставим плюсы и минусы. + означает прямое наследование, то есть ген первого родителя передаётся первому потомку, а второго - второму; - означает тот же процесс, но уже с инвертированием.

- Ген (-++++-)
- X1  (101100)
- X3  (011100)
- X9  (001101)
- X10 (111101)

Фитнес-функции потомков:
- f(x9) = 60
 - Особь Х10 нежизнеспособна, поэтому исключается их поколения (вес предметов превышает вместимость рюкзака)


### Поколение 4
Выберем 4 наиболее приспособленных:

1. X1 (101100)
2. X2 (111011)
3. X3 (011100)
4. X9 (001101)


Завершаем генетический алгоритм, поскольку выполнено условие о завершении цикла после получения третьего поколения, не считая начального.

Выбираем особь с наибольшей фитнес-функцией - X2.

## Ответ

Максимально возможная стоимость предметов: 75

Набор предметов, обеспечивающий максимальную стоимость: 1, 2, 3, 5, 6

Общий вес предметов: 15

Свободное место в рюкзаке: 0
