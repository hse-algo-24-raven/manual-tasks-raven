## Оптимальное расписание. Стратегия разделения процессоров Green

**Вариант от команды Green**

Имеется 6 независимых задания и 3 исполнителя, исполнитель 1 с производительностью 6, 
исполнитель 2 с производительностью 4 и исполнитель 3 с производительностью 2. 
Длительность заданий составляет 16, 14, 12, 10, 8, 6. 

Так как задания независимы, а исполнители имеют разную производительность, то для решения задачи подходит **Стратегия разделения процессоров**.

Задания с высоким приоритетом выполняет работник с высокой производительностью.


| 16   | 14   | 12   | 10    | 8     | 6     |
|------|------|------|-------|-------|-------|
|   6  |   4  |   2  |       |       |       |


Задания выписаны в порядке убывания. Так как  первая задача (16)  имеет самую большую длительность выполнения,
оно получает наивысший приоритет, затем расставляем приоритеты для остальных заданий. Они имеют разную длительность,
поэтому получают разные приоритеты.

```
16 - 6t = 14 - 4t       14 - 4t = 12 - 2t
2t = 2                  2t = 2
t = 1                   t = 1

A 16 - 6 * 1 = 10 
B 14 - 4 * 1 = 10
C 12 - 2 * 1 = 10
```

Вычисляем, когда задания поменяют приоритеты, то есть когда длительность до завершения выполнения задания 
станет равно длительности задания со следующим приоритетом.


| 10   | 10   | 10   | 10   | 8    | 6    |
|------|------|------|------|------|------|
|   3  |   3  |   3  |   3  |      |      |

Получается ситуация, когда сразу 4 задания имеют одинаковый приоритет. 
В такой ситуации мы должны назначить на выполения этой задачи максимально допустимое кол-во исполнителей с самой высокой производительностью.
Согласно теориии одну задачу может выполнять только один исполнитель, у нас 3 исполнителя и 4 задания, поэтому они, не мешая друг другу,
будут выполнять эти задачи.

```
6 + 4 + 2 = 12 - общая производительность; 
12 / 4 = 3 - производительность для решения 1 задачи из 4.

 10 - 3t = 8
 3t = 2
 t = 2/3

A 10 - 1/3 * 6 = 8
B 10 - 1/3 * 4 = 26/3
C 10 - 1/3 * 2 = 28/3

D 10 - 1/3 * 6 = 8
C 28/3 - 1/3 * 4 = 8
B 26/3 - 1/3 * 2 = 8
```

Сразу 5 задач имеют одинаковый приоритет, поэтому назначаем на выполнение сразу всех исполнителей 
(у нас их 3, поэтому это не противоречит алгоритму, так как 3 <= 5)

```
12 / 5  - производительность для решения 1 задачи из 5.
```

| 8      | 8     | 8     | 8     | 8     | 6    |
|--------|-------|-------|-------|-------|------|
| 12 / 5 |12 / 5 |12 / 5 |12 / 5 |12 / 5 |      |

```
8 - 12 / 5 t = 6
12/5 t = 2
t = 5/6

A 8 - 6 * 1/6 = 7
B 8 - 4 * 2/6 = 20/3
C 8 - 2 * 2/6 = 22/3

D 8 - 6 * 2/6 = 6
A 7 - 4 * 1/6 = 38/6
B 20/3 - 2 * 2/6 = 6

E 8 - 6 * 2/6 = 6
C 22/3 - 4 * 2/6 = 6
A 38/6 - 2 * 1/6 = 6
```

Сразу 6 задач имеют одинаковый приоритет. 

| 6    | 6    | 6    | 6    | 6    | 6    |
|------|------|------|------|------|------|
| 2    | 2    | 2    | 2    | 2    | 2    |

```
12 / 6 = 2 - производительность для решения 1 задачи из 6.

6 - 2t = 0
t = 3

A 6 - 6 * 1 = 0
B 6 - 4 * 1 = 2
C 6 - 2 * 1 = 4

D 6 - 6 * 1 = 0
E 6 - 4 * 1 = 2
B 2 - 2 * 1 = 0

F 6 - 6 * 1 = 0
C 4 - 4 * 1 = 0
E 2 - 2 * 1 = 0
```

```
Мы выполнили все задачи, давайте посчитаем общее время выполения:
1 + 2/3 + 5/6 + 3 = 5,5

(16 + 14 + 12 + 10 + 8 + 6) / (6 + 4 + 2) = 66 / 12 = 5,5

Результаты совпали, значит задания были распределены правильно.
Составим диаграмму Ганта.
```

```mermaid
gantt
    title Диаграмма Ганта Green
    dateFormat DD HH:mm    
    axisFormat %H:%M
    Начало выполнения работ : milestone, m1, 01 00:00, 0h
    section ИСП 1
    A         :a1, 01 00:00, 1h
    A         :a2, after a1, 0.33h
    D         :a3, after a2, 0.33h
    A         :a4, after a3, 0.17h
    D         :a5, after a4, 0.33h
    E         :a6, after a5, 0.33h
    A         :a7, after a6, 1h
    D         :a8, after a7, 1h
    F         :a9, after a8, 1h
    section ИСП 2
    B         :b1, 01 00:00, 1h
    B         :b2, after b1, 0.33h
    C         :b3, after b2, 0.33h
    B         :b4, after b3, 0.33h
    A         :b5, after b4, 0.17h
    C         :b6, after b5, 0.33h
    B         :b7, after b6, 1h
    E         :b8, after b7, 1h
    C         :b9, after b8, 1h
    section ИСП 3
    C         :c1, 01 00:00, 1h
    C         :c2, after c1, 0.33h
    B         :c3, after c2, 0.33h
    C         :c4, after c3, 0.33h
    B         :c5, after c4, 0.33h
    A         :c6, after c5, 0.17h
    C         :c7, after c6, 1h
    B         :c8, after c7, 1h
    E         :c9, after c8, 1h
    Окончание выполнения работ : milestone, m2, 01 05:30, 0h
```
Получаем ответ: 5,5