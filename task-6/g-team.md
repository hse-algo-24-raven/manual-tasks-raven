# 6. Придумать условия задачи разделения процессоров (исполнителей 3+, заданий 5+) и решить соответствующую задачу.

## Входные данные(придуманные условия)

P<sub>1</sub> = 4<br>
P<sub>2</sub> = 2<br>
P<sub>3</sub> = 1

| Задание | Длительность |
|---------|--------------|
| A       | 40           |
| B       | 30           |
| C       | 20           |
| D       | 10           |
| E       | 5            |


## Найдём минимальное время, за которое можно выполнить все задания

### t<sub>min</sub> = $\frac{A + B + C + D + E}{P_1 + P_2 + P_3}$ = $\frac{40 + 30 + 20 + 10 + 5}{4 + 2 + 1}$ = 15 минут
<br>


## Расчёт и распределение задач

### Этап 1: Распределение задач A, B и C 

На начальном этапе берём 3 самых крупных задания (A, B, C) и распределяем между ними процессоры по убыванию производительности. Рассчитаем время \(t\), при котором их оставшиеся объёмы сравняются:

```javascript
А и В: 40 - 4t = 30 - 2t => t = 5
В и С: 30 - 2t = 20 - t => t = 10
С и D: 20 - t = 10 => t = 10
```

Обновляем оставшиеся объёмы:
- A<sub>новое</sub> = 40 - 4 × 5 = 20
- B<sub>новое</sub> = 30 - 2 × 5 = 20
- C<sub>новое</sub> = 20 - 1 × 5 = 15

Время работы на этом этапе: T = 5.

Состояние заданий на конец этапа 1:

| Задание | Остаток      | Назначенный исполнитель |
|---------|--------------|-------------------------|
| A       | 20           | P<sub>1                 |
| B       | 20           | P<sub>2                 |
| C       | 15           | P<sub>3                 |
| D       | 10           |                         |
| E       | 5            |                         |


### Этап 2: Продолжение распределения

Теперь расставляем приоритеты выполнения первого и второго процесса на задачи А и В, а третьего на С. Рассчитаем момент времени \(t\), при котором задачи сравняются:

```javascript
AB и С: 20 - 3t = 15-t => t = 5/2 = 2.5
С и D: 15 - t = 10 => t = 5
```

Обновляем оставшиеся объёмы:
- A<sub>новое</sub> = 20 - 3 × 2.5 = 12.5
- B<sub>новое</sub> = 20 - 3 × 2.5 = 12.5
- C<sub>новое</sub> = 15 - 1 × 5 = 10

Время работы на этом этапе: T = 5/2.

Состояние заданий на конец этапа 2:

| Задание | Остаток      | Назначенный исполнитель |
|---------|--------------|-------------------------|
| A       | 12.5         | P<sub>1 + P<sub>2       |
| B       | 12.5         | P<sub>1 + P<sub>2       |
| C       | 12.5         | P<sub>1 + P<sub>2       |
| D       | 10           | P<sub>3                 |
| E       | 5            |                         |

### Этап 3: Дальше распределяем

Задачи (A, B и C) теперь имеют одинаковую длительность (12.5), назначим все исполнители на эти задачи. Рассчитаем момент времени \(t\), при котором задачи сравняются с задачей D:

```javascript
12.5 - 7/3t = 10 => t = 15/14
```
Время работы на этом этапе: T = 15/14.

Состояние заданий на конец этапа 3:

| Задание | Остаток    | Назначенный исполнитель     |
|---------|------------|-----------------------------|
| A       | 10         | P<sub>1 + P<sub>2 + P<sub>3 |
| B       | 10         | P<sub>1 + P<sub>2 + P<sub>3 |
| C       | 10         | P<sub>1 + P<sub>2 + P<sub>3 |
| D       | 10         |                             |
| E       | 5          |                             |

### Этап 4: Еще распределяем

Задачи (A, B, C и D) теперь имеют одинаковую длительность (10), назначим все исполнители на эти задачи. Рассчитаем момент времени \(t\), при котором задачи сравняются с задачей Е:

```javascript
10 - 7/4t = 5 => t = 20/7
```
Время работы на этом этапе: T = 20/7.

Состояние заданий на конец этапа 4:

| Задание | Остаток  | Назначенный исполнитель     |
|---------|----------|-----------------------------|
| A       | 5        | P<sub>1 + P<sub>2 + P<sub>3 |
| B       | 5        | P<sub>1 + P<sub>2 + P<sub>3 |
| C       | 5        | P<sub>1 + P<sub>2 + P<sub>3 |
| D       | 5        | P<sub>1 + P<sub>2 + P<sub>3 |
| E       | 5        |                             |

### Этап 5: Завершение распределения

Задачи (A, B, C, D и Е) теперь имеют одинаковую длительность (5), назначим все исполнители на эти задачи. Рассчитаем момент времени \(t\), при котором задачи сравняются с 0(закончится выполнение):

```javascript
5 - 7/5t = 0 => t = 25/7
```
Время работы на этом этапе: T = 25/7.

Состояние заданий на конец этапа 5:

| Задание | Остаток  | Назначенный исполнитель     |
|---------|----------|-----------------------------|
| A       | 0        | P<sub>1 + P<sub>2 + P<sub>3 |
| B       | 0        | P<sub>1 + P<sub>2 + P<sub>3 |
| C       | 0        | P<sub>1 + P<sub>2 + P<sub>3 |
| D       | 0        | P<sub>1 + P<sub>2 + P<sub>3 |
| E       | 0        | P<sub>1 + P<sub>2 + P<sub>3 |

## Итоговая диаграмма Ганта

```mermaid
gantt
title Диаграмма Ганта - Оптимальное расписание для наших входных данных
dateFormat DD HH:mm
axisFormat %H:%M
Начало выполнения работ : milestone, m1, 01 00:00, 0h
section Исполнитель 1
A         :a1, 01 00:00, 5h
A         :a2, after a1, 1.25h
B         :a3, after a2, 1.25h
A         :a4, after a3, 0.36h
B         :a5, after a4, 0.36h
C         :a6, after a5, 0.36h
A         :a7, after a6, 0.71h
B         :a8, after a7, 0.71h
C         :a9, after a8, 0.71h
D         :a10, after a9, 0.71h
A         :a11, after a10, 0.71h
B         :a12, after a11, 0.71h
C         :a13, after a12, 0.71h
D         :a14, after a13, 0.71h
E         :a15, after a14, 0.71h
section Исполнитель 2
B         :b1, 01 00:00, 5h
B         :b2, after b1, 1.25h
A         :b3, after b2, 1.25h
B         :b4, after b3, 0.36h
C         :b5, after b4, 0.36h
A         :b6, after b5, 0.36h
B         :b7, after b6, 0.71h
C         :b8, after b7, 0.71h
D         :b9, after b8, 0.71h
A         :b10, after b9, 0.71h
B         :b11, after b10, 0.71h
C         :b12, after b11, 0.71h
D         :b13, after b12, 0.71h
E         :b14, after b13, 0.71h
A         :b15, after b14, 0.71h
section Исполнитель 3
C         :c1, 01 00:00, 5h
C         :c2, after c1, 2.5h
C         :c3, after c2, 0.36h
A         :c4, after c3, 0.36h
B         :c5, after c4, 0.36h
C         :c6, after c5, 0.71h
D         :c7, after c6, 0.71h
A         :c8, after c7, 0.71h
B         :c9, after c8, 0.71h
C         :c10, after c9, 0.71h
D         :c11, after c10, 0.71h
E         :c12, after c11, 0.71h
A         :c13, after c12, 0.71h
B         :c14, after c13, 0.71h
Окончание выполнения работ : milestone, m2, after c14, 0h
```