### Вариант 8:
#### Пропускная способность дуг сети p(e) и стоимость транспортировки  единицы потока c(e):


| Дуги                      | sa | sb | sd | ba | bc | cd | ac | at | dt |
|:--------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| Пропускная способность    | 6  | 7  | 6  | 6  | 4  | 10 | 5  | 8  | 12 |
| Стоимость транспортировки | 1  | 1  | 3  | 1  | 1  | 1  | 3  | 4  | 3  |

### Построим сеть с источником **s**, стоком **t** и указанными пропускными способностями дуг для поиска максимального потока.

```mermaid
graph LR
    s-->|6|a
    s-->|7|b
    s-->|6|d
    b-->|6|a
    b-->|4|c
    c-->|10|d
    a-->|5|c
    a-->|8|t
    d-->|12|t
```
Укажем начальный поток величиной 6 **s -> d -> t**. Построим соответствующую остаточную сеть.

```mermaid
graph LR
    s-->|6|d
    d-->|6|t
    t-.->|6|d
    a-.->|6|s
    b-.->|7|s
    a-.->|6|b
    c-.->|4|b
    d-.->|10|c
    c-.->|5|a
    t-.->|8|a
```

В остаточной сети найден увеличивающий путь t -> a -> s. Минимальный вес дуг на этом пути равен 6.

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

```mermaid
graph LR
    s-->|6|d
    d-->|6|t
    t-.->|6|d
    s-->|6|a
    a-->|6|t
    t-.->|2|a
    b-.->|7|s
    a-.->|6|b
    c-.->|4|b
    d-.->|10|c
    c-.->|5|a
```

В остаточной сети найден увеличивающий путь t -> d -> c -> b -> s. Минимальный вес дуг на этом пути равен 4.

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

```mermaid
graph LR
    s-->|6|d
    d-->|10|t
    t-.->|2|d
    s-->|6|a
    a-->|6|t
    t-.->|2|a
    s-->|4|b
    b-.->|3|s
    a-.->|6|b
    b-->|4|c
    c-->|4|d
    d-.->|6|c
    c-.->|5|a
```
В остаточной сети найден увеличивающий путь t -> a -> b -> s. Минимальный вес дуг на этом пути равен 2.

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

```mermaid
graph LR
    s-->|6|d
    d-->|10|t
    t-.->|2|d
    s-->|6|a
    a-->|8|t
    s-->|6|b
    b-.->|1|s
    a-.->|4|b
    b-->|2|a
    b-->|4|c
    c-->|4|d
    d-.->|6|c
    c-.->|5|a
```

В остаточной сети найден увеличивающий путь t -> d -> c -> a -> b -> s. Минимальный вес дуг на этом пути равен 1.

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

```mermaid
graph LR
    s-->|6|d
    d-->|11|t
    t-.->|1|d
    s-->|6|a
    a-->|8|t
    s-->|7|b
    a-.->|3|b
    a-->|1|c
    b-->|3|a
    b-->|4|c
    c-->|5|d
    d-.->|5|c
    c-.->|4|a
```

В остаточной сети не найдено увеличивающих путей, следовательно, алгоритм завершил работу и найденный поток величиной 19 является максимальным для данной сети.

```mermaid
graph LR
    s-->|6,6|a
    s-->|7,7|b
    s-->|6,6|d
    b-->|3,6|a
    b-->|4,4|c
    c-->|5,10|d
    a-->|1,5|c
    a-->|8,8|t
    d-->|11,12|t
```


| Дуги                           | sa | sb | sd | ba | bc | cd | ac | at | dt | Итого |
|:-------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:-----:|
| Пропускная способность         | 6  | 7  | 6  | 6  | 4  | 10 | 5  | 8  | 12 |       |
| Локальный поток f(e)           | 6  | 7  | 6  | 3  | 4  | 5  | 1  | 8  | 11 |       |
| Стоимость транспортировки      | 1  | 1  | 3  | 1  | 1  | 1  | 3  | 4  | 3  |       |
|Суммарная стоимость f(e)*c(e)   | 6  | 7  | 18 | 3  | 4  | 5  | 3  | 32 | 33 |**111**|

Стоимость полученного потока составляет 111.

### Попробуем уменьшить стоимость потока для чего построим остаточную сеть.
Для каждого ребра остаточной сети укажем стоимость транспортировки единицы потока.

```mermaid
graph LR
    s-->|-1|a
    s-->|-1|b
    s-->|-3|d
    b-->|-1|a
    a-.->|1|b
    b-->|-1|c
    c-->|-1|d
    d-.->|1|c
    a-->|-3|c
    c-.->|3|a
    a-->|-4|t
    d-->|-3|t
    t-.->|3|d
```

В остаточной сети отсутствуют циклы отрицательной стоимости, следовательно, стоимость потока минимальна.

## (Чтобы попрактиковаться со второй частью изменим конфигурацию потоков)

Найден максимальный поток.

| Дуги                           | sa | sb | sd | ba | bc | cd | ac | at | dt | Итого |
|:-------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:-----:|
| Пропускная способность         | 6  | 7  | 6  | 6  | 4  | 10 | 5  | 8  | 12 |       |
| Локальный поток f(e)           | 6  | 7  | 6  | 4  | 3  | 5  | 2  | 8  | 11 |       |
| Стоимость транспортировки      | 1  | 1  | 3  | 1  | 1  | 1  | 3  | 4  | 3  |       |
|Суммарная стоимость f(e)*c(e)   | 6  | 7  | 18 | 4  | 3  | 5  | 6  | 32 | 33 |**114**|

```mermaid
graph LR
    s-->|-1|a
    s-->|-1|b
    s-->|-3|d
    b-->|-1|a
    a-.->|1|b
    b-->|-1|c
    c-.->|1|b
    c-->|-1|d
    d-.->|1|c
    a-->|-3|c
    c-.->|3|a
    a-->|-4|t
    d-->|-3|t
    t-.->|3|d
```

В остаточной сети найден ориентированный цикл отрицательной стоимости b -> a -> c -> b (-1 - 3 + 1 = -3).

Найдем минимальный вес ребра в указанном цикле, изображенном **в остаточной сети с указанием величины потока**.

```mermaid
graph LR
    s-->|6|a
    s-->|7|b
    s-->|6|d
    b-->|4|a
    a-.->|2|b
    b-->|3|c
    c-.->|1|b
    c-->|5|d
    d-.->|5|c
    a-->|2|c
    c-.->|3|a
    a-->|8|t
    d-->|11|t
    t-.->|1|d
```

Минимальный вес ребра в цикле 1. Удалим найденный цикл - уменьшим на 1 вес всех ребер, входящих в цикл.

```mermaid
graph LR
    s-->|6|a
    s-->|7|b
    s-->|6|d
    b-->|3|a
    a-.->|3|b
    b-->|4|c
    c-->|5|d
    d-.->|5|c
    a-->|1|c
    c-.->|4|a
    a-->|8|t
    d-->|11|t
    t-.->|1|d
```

Скорректируем остаточную сеть с указанием стоимости транспортировки единицы потока.

```mermaid
graph LR
    s-->|-1|a
    s-->|-1|b
    s-->|-3|d
    b-->|-1|a
    a-.->|1|b
    b-->|-1|c
    c-->|-1|d
    d-.->|1|c
    a-->|-3|c
    c-.->|3|a
    a-->|-4|t
    d-->|-3|t
    t-.->|3|d
```

В остаточной сети отсутствуют циклы отрицательной стоимости, следовательно, стоимость потока минимальна.

Рассчитаем стоимость полученного максимального потока.

| Дуги                           | sa | sb | sd | ba | bc | cd | ac | at | dt | Итого |
|:-------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:-----:|
| Пропускная способность         | 6  | 7  | 6  | 6  | 4  | 10 | 5  | 8  | 12 |       |
| Локальный поток f(e)           | 6  | 7  | 6  | 3  | 4  | 5  | 1  | 8  | 11 |       |
| Стоимость транспортировки      | 1  | 1  | 3  | 1  | 1  | 1  | 3  | 4  | 3  |       |
|Суммарная стоимость f(e)*c(e)   | 6  | 7  | 18 | 3  | 4  | 5  | 3  | 32 | 33 |**111**|

Стоимость полученного потока составляет 111.

### Ответ:
Максимальный поток в сети равен 19, минимальная стоимость потока 111, она реализуется следующим локальными потоками:

```mermaid
graph LR
    s-->|6,6|a
    s-->|7,7|b
    s-->|6,6|d
    b-->|3,6|a
    b-->|4,4|c
    c-->|5,10|d
    a-->|1,5|c
    a-->|8,8|t
    d-->|11,12|t
```