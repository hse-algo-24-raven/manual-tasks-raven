Задача о максимальном потоке минимальной стоимости (Вариант 6)

### Постановка задачи
1. Дана сеть (взвешенный ориентированный граф) с источником **s** и стоком **t**.
2. Указаны пропускные способности **p(e)** и стоимость транспортировки **c(e)**.

#### Пропускная способность дуг сети **p(e)** и стоимость транспортировки единицы потока **c(e)**:
| Дуги                      | sa | sс | ab | ac | cb | bd | de | be | ce | et |
|:--------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| Пропускная способность    | 8  | 8  | 7  | 3  | 6  | 6  | 5  | 5  | 12 | 14 |
| Стоимость транспортировки | 2  | 2  | 2  | 1  | 1  | 2  | 2  | 5  | 7  | 3  |

### 1. Составим граф сети

```mermaid
graph LR
   s-->|8|a
   s-->|8|c
   a-->|7|b
   a-->|3|c
   c-->|6|b
   b-->|6|d
   d-->|5|e
   b-->|5|e
   c-->|12|e
   e-->|14|t
```

### 2. Поиск максимального потока методом поиска увеличивающих путей

 Шаг 1. Выберем путь: s → a → b → d → e → t

 Резервы дуг:
 - s → a: 8
 - a → b: 7
 - b → d: 6
 - d → e: 5
 - e → t: 14

 Минимальный резерв = 5. Передаём поток 5 по этому пути и строим остаточную сеть.

```mermaid
graph RL
    t-.->|9|e
    e-.->|5|d
    d-.->|1|b
    b-.->|2|a
    a-.->|5|s
    s-->|3|a
    a-->|2|b
    b-->|1|d
    s-->|8|c
    a-->|3|c
    c-->|6|b
    b-->|5|e
    c-->|12|e
```

Шаг 2. Выберем путь: s → c → e → t

Резервы дуг:
s → c: 8

 ```mermaid
 graph RL
    t-.->|9|e
    e-.->|5|d
    d-.->|1|b
    b-.->|2|a
    a-.->|5|s
    s-->|3|a
    a-->|2|b
    b-->|1|d
    s-->|8|c
    a-->|3|c
    c-->|6|b
    b-->|5|e
    c-->|12|e
    e-->|9|t
 ```

 Минимальный резерв = 8. Передаём поток 8 по этому пути:

 Шаг 3. Выберем путь: s → a → b → e → t
 Резервы дуг:
 - s → a: остаток 3
 - a → b: остаток 2
 - b → e: 5 (не использована ранее по этому пути)
 - e → t: остаток 1

 Минимальный резерв = 1. Передаём поток 1 по этому пути:

 ```mermaid
 graph RL
    t-.->|1|e
    e-.->|5|d
    d-.->|1|b
    b-.->|2|a
    a-.->|5|s
    s-->|3|a
    a-->|2|b
    b-->|1|d
    s-->|0|c
    c-->|4|e
 ```

 ```mermaid
 graph RL
    t-.->|0|e
    e-.->|5|d
    d-.->|1|b
    b-.->|1|a
    a-.->|5|s
 ```

После трёх шагов суммарный поток из s равен 5 + 8 + 1 = 14. Алгоритм завершается, так как увеличивающих путей нет.
 Итоговая схема максимального потока (запись вида "X/Y": X – локальный поток, Y пропускная способность дуги):

 ### 3. Расчёт стоимости полученного потока

| Дуги   | sa   | sc   | ab   | ac   | cb   | bd   | de   | be   | ce   | et   |
| :----- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| Пропускная способность | 8    | 8    | 7    | 3    | 6    | 6    | 5    | 5    | 12   | 14   |
| Локальный поток f(e)   | 6    | 8    | 6    | 0    | 0    | 5    | 5    | 1    | 8    | 14   |
| Стоимость c(e)       | 2    | 2    | 2    | 1    | 1    | 2    | 2    | 5    | 7    | 3    |
| Суммарная стоимость   | 12   | 16   | 12   | 0    | 0    | 10   | 10   | 5    | 56   | 42   |

Стоимость полученного потока равна 163

 ### 4. Минимизация стоимости потока (поиск циклов отрицательной стоимости)

 Построим остаточную сеть с указанием стоимостей транспортировки единицы потока:

 ```mermaid
 graph LR
    s-->|-2|a
    a-->|-2|s
    s-->|-2|c
    c-->|-2|s
    a-->|-2|b
    b-->|-2|a
    a-->|1|c
    c-->|-1|a
    c-->|1|b
    b-->|-1|c
    b-->|-2|d
    d-->|-2|b
    d-->|-2|e
    e-->|-2|d
    b-->|5|e
    e-->|-5|b
    c-->|7|e
    e-->|-7|c
    e-->|-3|t
    t-->|-3|e
 ```

Обнаружен цикл отрицательной стоимости:
 Цикл: b → e → c → b
 - b → e: стоимость 5
 - e → c: стоимость -7
 - c → b: стоимость 1
 Суммарная стоимость цикла = 5 + (–7) + 1 = –1.

 Минимальный резерв вдоль цикла = min(остаток на b → e = 4, на e → c = 8, на c → b = 6) = 4.

 Корректируем поток по циклу:

 - Увеличиваем поток по b → e на 4: 1 → 5.
 - Уменьшаем поток по c → e на 4: 8 → 4.
 - Увеличиваем поток по c → b на 4: 0 → 4.

 ### 5. Пересчёт стоимости потока после корректировки

 | Дуги                  | sa  | sc  | ab  | ac  | cb  | bd  | de  | be  | ce  | et  |
| --------------------- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Пропускная способность | 8   | 8   | 7   | 3   | 6   | 6   | 5   | 5   | 12  | 14  |
| Локальный поток f(e)   | 6   | 8   | 6   | 0   | 4   | 5   | 5   | 5   | 4   | 14  |
| Стоимость c(e)       | 2   | 2   | 2   | 1   | 1   | 2   | 2   | 5   | 7   | 3   |
| Суммарная стоимость   | 12  | 16  | 12  | 0   | 4   | 10  | 10  | 25  | 28  | 42  |
| Итого                  |  |  |  |  |  |  |  |  |  | 159 |

 Стоимость транспортировки потока уменьшена до 159

 ### 6. Итоговый ответ
 Максимальный поток в сети равен 14, минимальная стоимость транспортировки потока составляет 159, что реализуется следующими локальными потоками:

 ```mermaid
 graph LR
    s-->|6/8|a
    s-->|8/8|c
    a-->|6/7|b
    a-->|0/3|c
    c-->|4/12|e
    c-->|4/6|b
    b-->|5/6|d
    b-->|5/5|e
    d-->|5/5|e
    e-->|14/14|t
 ```