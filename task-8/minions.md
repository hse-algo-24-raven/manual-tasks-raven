‘’’# Нахождение максимального потока в сети

В этой задаче нам дана сеть с узлами и направленными дугами. Нашей целью является определить максимальное количество «течущей» жидкости (потока) от источника s к стоку t. Поток по каждой дуге ограничен её пропускной способностью.

## Исходные данные

Представим сеть, где:
- s – источник,
- t – сток,
- a, b, c – промежуточные узлы.

Дуги и их пропускные способности:

| Дуга   | Пропускная способность |
|:------:|:----------------------:|
| s → a  | 7                      |
| s → c  | 5                      |
| a → c  | 6                      |
| a → b  | 3                      |
| c → b  | 9                      |
| a → t  | 2                      |
| b → t  | 8                      |
| c → t  | 2                      |

Мы будем искать пути, по которым можно постепенно увеличивать поток, пока не достигнем предела.

## Как мы будем решать задачу

Мы используем метод поиска увеличивающих путей (например, алгоритм Форда–Фалкерсона с поиском в ширину, то есть алгоритм Эдмондса–Карпа). Идея в том, чтобы начать с нулевого потока и шаг за шагом искать пути, по которым можно «протолкнуть» дополнительный поток, не превышая возможности дуг. Каждый раз выбирается путь, где самый узкий участок (бутылочное горлышко) определяет, на сколько можно увеличить поток. После каждого такого шага обновляется остаточная сеть, где отражаются уже использованные мощности.

## Пошаговое объяснение (человечным языком)

1. Начало пути – путь через `a` к `t`:

   Представьте, что мы сначала решили попробовать пойти по простому маршруту: из s в a, а затем сразу в t.  
   - Из s в a можно пропустить до 7 единиц, а из a в t – только 2.  
   Поэтому максимум, что мы можем пропустить по этому пути, – 2 единицы. Мы «заполняем» эти дуги на 2 единицы потока.

2. Новый путь – через `a` и `b`:

   Теперь, когда часть пропускной способности по s → a уже использована, остаётся ещё 5 единиц (7 минус уже использованные 2). Попробуем другой маршрут: s → a → b → t.  
   - Из a в b пропускная способность равна 3, а из b в t – 8.  
   Здесь самое ограничивающее звено – дуга a → b с мощностью 3. Значит, по этому маршруту можно добавить ещё 3 единицы потока.

3. Третий путь – через `c`:

   Давайте посмотрим в сторону узла c. Если идём напрямую из s в c и затем сразу в t, то  
   - Из s в c можно пропустить 5 единиц, а из c в t – только 2.  
   Таким образом, по этому маршруту добавляется 2 единицы потока.

4. Четвёртый путь – комбинированный маршрут через `c` и `b`:

   Можно также использовать узел c для обхода: идём из s в c, потом из c в b, а оттуда в t.  
   - Из s в c осталось 3 единицы (так как ранее по s → c мы уже пропустили 2),  
   - Дугов c → b хватает (9 единиц),  
   - А из b в t осталось ещё 5 единиц (так как уже использовано 3 из 8).  
   Здесь самый маленький остаток – 3, значит, можно добавить 3 единицы потока.

5. Пятый путь – смешанный маршрут через `a`, `c` и `b`:

   Если внимательно присмотреться, можно найти путь: s → a → c → b → t.  
   - Из s в a осталось 2 единицы,  
   - Из a в c – 6 единиц (ещё не использовали эту дугу),  
   - Из c в b – осталось 6 единиц (после предыдущего шага),  
   - Из b в t осталось 2 единицы.  
   Ограничивающий момент – 2 единицы, поэтому по этому пути добавляем 2 единицы потока.

После этого мы видим, что из s уже не осталось свободной пропускной способности, чтобы направить поток к t.

Суммарный поток:  
2 (первый путь) + 3 (второй) + 2 (третий) + 3 (четвёртый) + 2 (пятый) = 12 единиц.

## Итоговое распределение потока

Получаем следующий результат для каждой дуги:
- s → a: 7 единиц (полностью использована, 7/7)
- s → c: 5 единиц (полностью использована, 5/5)
- a → t: 2 единицы (2/2)
- a → b: 3 единицы (3/3)
- a → c: 2 единицы (2/6)
- c → b: 5 единиц (5/9)
- c → t: 2 единицы (2/2)
- b → t: 8 единиц (8/8)

Можно проверить, что на каждом узле соблюдается баланс потока (то есть сумма входящих потоков равна сумме исходящих).

```Также удобно проверить результат через теорему о минимальном разрезе: если разделить сеть на две группы узлов (например, взять \(S = \{s, a, c, b\}\) и \(T = \{t\}\)), то дуги, пересекающие этот разрез (из \(S\) в \(T\)), имеют суммарную пропускную способность \(2 + 2 + 8 = 12\), что совпадает с нашим максимальным потоком.

## Итоговая диаграмма (Mermaid)

Ниже представлена диаграмма сети, где для каждой дуги указан формат текущий поток / пропускная способность:

```mermaid
graph LR
    s -- "7/7" --> a
    s -- "5/5" --> c
    a -- "2/2" --> t
    a -- "3/3" --> b
    a -- "2/6" --> c
    c -- "5/9" --> b
    c -- "2/2" --> t
    b -- "8/8" --> t```